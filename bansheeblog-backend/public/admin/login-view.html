<script type="text/template" data-template id="login-view">
    <form data-bindings="submit -> onsubmit" class="login-form">
        <label>
            Admin login
            <input type="text" data-bindings="username" placeholder="Username" required>
        </label>
        <input type="password" data-bindings="password" placeholder="Password" required>
        <input type="submit" value="Login">
    </form>
</script>

<script type="text/css" data-style for="login-view">
    .login-form {
        padding-top: 20px;
        max-width: 600px;
        margin: auto;
    }
    .login-form input {
        margin: 2px;
    }
    .login-form button {
        float: right;
    }
    @media only screen and (min-width: 640px) {
        .login-form {
            padding-top: 60px;
        }
    }
</script>

<script type="text/javascript" data-behaviour for="login-view">
    function onBind() {
        return {
            properties: {
                username: "",
                password: "",
                submit: ev => {
                    ev.preventDefault();
                    const credentials = {
                        Username: this.username,
                        Password: this.password
                    };
                    request("POST", "/login", credentials).then(() => {
                        this.loggedIn();
                    });
                }
                
            }
        };
    }
</script>